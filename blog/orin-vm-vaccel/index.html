<!doctype html><!-- This site was created with Hugo Blox. https://hugoblox.com --><!-- Last Published: February 19, 2026 --><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 5.9.7"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><link rel=stylesheet href=/css/vendor-bundle.min.26c458e6907dc03073573976b7f4044e.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css integrity crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=/css/wowchemy.0a92100ca9cf271dc93dd61885c3d747.css><link rel=stylesheet href=/css/libs/chroma/github-light.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/dracula.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=author content="Charalampos Mainas"><meta name=description content="Following up on a successful VM boot on a Jetson AGX
Orin,
we continue exploring the capabilities of this edge device, focusing on the
cloud-native aspect of application deployment."><link rel=alternate hreflang=en-us href=/blog/orin-vm-vaccel/><link rel=canonical href=/blog/orin-vm-vaccel/><link rel=manifest href=/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu_76f04f0ed4ada794.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu_bbf9ba2454448482.png><meta name=theme-color content="#1565c0"><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@GetResearchDev"><meta property="twitter:creator" content="@GetResearchDev"><meta property="twitter:image" content="/media/logo_hu_866fdf07312224c.png"><meta property="og:type" content="website"><meta property="og:site_name" content="Nubificus"><meta property="og:url" content="/blog/orin-vm-vaccel/"><meta property="og:title" content="Isolated, hardware-accelerated functions on Jetson AGX Orin | Nubificus"><meta property="og:description" content="Following up on a successful VM boot on a Jetson AGX
Orin,
we continue exploring the capabilities of this edge device, focusing on the
cloud-native aspect of application deployment."><meta property="og:image" content="/media/logo_hu_866fdf07312224c.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2023-09-24T16:31:04+01:00"><meta property="article:modified_time" content="2023-09-24T16:31:04+01:00"><script src=https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.js integrity="sha512-yXXqOFjdjHNH1GND+1EO0jbvvebABpzGKD66djnUfiKlYME5HGMUJHoCaeE4D5PTG2YsSJf6dwqyUUvQvS0vaA==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.css integrity="sha512-LQ97camar/lOliT/MqjcQs5kWgy6Qz/cCRzzRzUCfv0fotsCTC9ZHXaPQmJV8Xu/PVALfJZ7BDezl5lW3/qBxg==" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#1565c0",text:"rgb(255, 255, 255)"},button:{background:"rgb(255, 255, 255)",text:"#1565c0"}},theme:"classic",content:{message:"This website uses cookies to ensure you get the best experience on our website.",dismiss:"Got it!",link:"Learn more",href:"https://www.cookiesandyou.com"}})})</script><title>Isolated, hardware-accelerated functions on Jetson AGX Orin | Nubificus</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=ad8728765ec4ac577fba7c18d657fade><script src=/js/wowchemy-init.min.9e4214442a7711d35691acd58f6f6361.js></script><div class="page-header header--fixed"><style>.navbar-logo{height:50px;display:flex;align-items:center}.navbar-logo img{max-height:45px;width:auto;display:block}.navbar-logo .logo-dark{display:none}body.colorscheme-dark .navbar-logo .logo-light,body.dark .navbar-logo .logo-light{display:none}body.colorscheme-dark .navbar-logo .logo-dark,body.dark .navbar-logo .logo-dark{display:block}.navbar-logo.logo-nubis,.navbar-logo.logo-nubificus{display:none}</style><script>document.addEventListener("DOMContentLoaded",function(){var e=window.location.hostname,t=e==="nubis-pc.eu"||e==="www.nubis-pc.eu",n=t?"logo-nubis":"logo-nubificus";document.querySelectorAll(".navbar-logo."+n).forEach(function(e){e.style.display="flex"}),document.querySelectorAll("[data-brand]").forEach(function(e){var n=e.getAttribute("data-brand");t?e.textContent=n==="primary"?"Nubis":"Nubificus":e.textContent=n==="primary"?"Nubificus":"Nubis"})})</script><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/><div class="navbar-logo logo-nubificus"><img class=logo-light src=/media/logo-nubificus_hu_7be4fa6b19286a64.png alt=Nubificus>
<img class=logo-dark src=/media/logo-nubificus-dark_hu_bd80a6d6121ee2ff.png alt=Nubificus></div><div class="navbar-logo logo-nubis"><img class=logo-light src=/media/logo-nubis.png alt="Nubis PC">
<img class=logo-dark src=/media/logo-nubis-dark.png alt="Nubis PC"></div></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/><div class="navbar-logo logo-nubificus"><img class=logo-light src=/media/logo-nubificus_hu_7be4fa6b19286a64.png alt=Nubificus>
<img class=logo-dark src=/media/logo-nubificus-dark_hu_bd80a6d6121ee2ff.png alt=Nubificus></div><div class="navbar-logo logo-nubis"><img class=logo-light src=/media/logo-nubis.png alt="Nubis PC">
<img class=logo-dark src=/media/logo-nubis-dark.png alt="Nubis PC"></div></a></div><div class="navbar-collapse main-menu-item collapse justify-content-end" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/><span>Home</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Research</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/projects/><span>Projects</span></a>
<a class=dropdown-item href=/publication><span>Publications</span></a></div></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Solutions</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/solutions/edgelink/><span>edgeLink</span></a>
<a class=dropdown-item href=/solutions/urunc/><span>urunc</span></a>
<a class=dropdown-item href=/solutions/vaccel/><span>vAccel</span></a></div></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Feed</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/post><span>News</span></a>
<a class=dropdown-item href=/event><span>Events</span></a></div></li><li class=nav-item><a class="nav-link active" href=/blog><span>Blog</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>About</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/people><span>People</span></a>
<a class=dropdown-item href=/contact><span>Contact</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span>
</a><a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span>
</a><a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></header><script>document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".navbar-nav .nav-item.dropdown");e.forEach(function(t){t.addEventListener("mouseenter",function(){e.forEach(function(e){if(e!==t){e.classList.remove("show");var n=e.querySelector(".dropdown-menu");n&&n.classList.remove("show")}}),t.classList.add("show");var n=t.querySelector(".dropdown-menu");n&&n.classList.add("show")}),t.addEventListener("mouseleave",function(){t.classList.remove("show");var e=t.querySelector(".dropdown-menu");e&&e.classList.remove("show")})})})</script></div><div class=page-body><article class=article><div class=article-container><a class=blog-back-link href=javascript:void(0) onclick=blogGoBack()><i class="fas fa-arrow-left"></i> Back to Blog</a></div><div class="article-container pt-3"><h1>Isolated, hardware-accelerated functions on Jetson AGX Orin</h1><div class=article-metadata><span class=article-date>Sep 24, 2023</span></div></div><div class=article-container><div class=article-style><p>Following up on a successful <a href=/orin-vm>VM boot</a> on a <a href=https://www.nvidia.com/en-il/autonomous-machines/embedded-systems/jetson-orin/ target=_blank rel=noopener>Jetson AGX
Orin</a>,
we continue exploring the capabilities of this edge device, focusing on the
cloud-native aspect of application deployment.</p><p>As a team, we&rsquo;ve built <a href=https://docs.vaccel.org target=_blank rel=noopener>vAccel</a>, a hardware
acceleration framework that decouples the operation from its hardware
implementation. One of the awesome things vAccel offers is the ability to
execute hardware-accelerated applications in a VM that has no direct access to
a hardware accelerator. Given the Jetson Orin board has an Ampere GPU, with
1792 cores and 56 Tensor Cores, it sounds like a perfect edge device to try
isolated hardware-accelerated workload execution through VM sandboxes.</p><p>Additionally, coupled with our downstream <code>kata-containers</code> port, we can invoke a
VM sandboxed container through CRI that can execute compute-intensive tasks
faster by using the GPU without having direct access to it!</p><h2 id=overview>Overview</h2><p>In this post we go through the high-level architecture of
<a href=#how-kata-containers-work>kata-containers</a> and <a href=#how-vaccel-works>vAccel</a>
and provide insights into the <a href=#kata-vaccel>integration</a> we did.</p><p>Then, we go through the steps to <a href=#kata-containers-binary-installation>run a stock kata
container</a> using various supported VMMs
(<a href=https://github.com/qemu/qemu target=_blank rel=noopener>QEMU</a>, <a href=https://github.com/firecracker-microvm/firecracker target=_blank rel=noopener>AWS
Firecracker</a>, <a href=https://github.com/cloud-hypervisor/cloud-hypervisor target=_blank rel=noopener>Cloud
hypervisor</a>, and
<a href=https://github.com/kata-containers/kata-containers/ target=_blank rel=noopener>Dragonball</a>) on the
Jetson AGX Orin board.</p><p>Finally, we provide the steps to <a href=#enable-vaccel-on-the-kata-runtime>enable
vAccel</a> on a VM sandboxed container using
our custom <code>kata-containers</code> runtime for the
<a href=https://github.com/nubificus/kata-containers/tree/vaccel-v3.2 target=_blank rel=noopener>Go</a> and
<a href=https://github.com/nubificus/kata-containers/tree/rs-vaccel-fusion target=_blank rel=noopener>Rust</a>
variants.</p><h3 id=how-kata-containers-work>How kata containers work</h3><p>Kata containers is a sandboxed container runtime, combining the benefits of VMs
in terms of workload isolation, with those of containers, in terms of
portability. Installing and configuring <code>kata-containers</code> is straightforward
and we have covered that in <a href=/posts/kata-build-source>some</a> of our
<a href=/posts/kata-build-configure-qemu>previous</a>
<a href=/posts/kata-build-configure-fc>posts</a>.</p><p>In this post, we will not go through the details of building &ndash; we will just
install <code>kata-containers</code> from the stock releases and add the binaries to enable
vAccel execution.</p><h3 id=how-vaccel-works>How vAccel works</h3><p>vAccel is a software framework to expose hardware acceleration functionality to
workloads that do not have direct access to an acceleration device. vAccel
features a modular design where runtime <code>plugins</code> implement API operations.
Figure 1 shows the software stack for the core vAccel library, along with a
number of plugins and their accompanying external libraries.</p><p><figure id=figure-figure-1-the-vaccel-software-stack><div class="d-flex justify-content-center"><div class=w-100><img src=/images/orin/vaccel-stack.png alt=vaccel-stack loading=lazy data-zoomable></div></div><figcaption>Figure 1: The vAccel software stack</figcaption></figure></p><p>Apart from &ldquo;hardware&rdquo; plugins (that implement the API operations in some sort
of acceleration library, eg CUDA, OpenCL etc.), vAccel features virtual plugins
that are able to forward requests to a remote Host. This functionality makes it
an open-ended API remoting framework. Based on the transport plugin (virtio or
vsock) multiple setups can be enabled, making it ideal to use on VMs or on
resource-constrained devices for remote execution. You can find more info about
vAccel in the <a href=https://docs.vaccel.org target=_blank rel=noopener>vAccel docs website</a>.</p><p>The socket mode of vAccel for remote operations of vAccel works as follows:</p><ul><li>the Host component (direct access to an accelerator), listens for requests
using a predefined protocol (over gRPC) and issues vAccel API calls to the
core vAccelRT library.</li><li>the Remote/Guest component (no direct access to an accelerator), forwards
requests to the Host component via a gRPC channel and receives results from
the execution.</li></ul><p>At the moment, the Host component is a simple gRPC agent (<code>vaccel-agent</code>) and
the Remote/Guest component is a vAccel plugin (<code>libvaccel-vsock.so</code>). A logical
diagram of the execution flow for a VM workload taking advantage of the vAccel
framework to run accelerated operations is shown in Figure 2.</p><p><figure id=figure-figure-2-execution-flow-for-a-vaccel-application-running-in-a-vm><div class="d-flex justify-content-center"><div class=w-100><img src=/images/orin/vaccel-vm-flow.png alt=vaccel loading=lazy data-zoomable></div></div><figcaption>Figure 2: Execution flow for a vAccel application running in a VM</figcaption></figure></p><h3 id=kata-vaccel>kata-vAccel</h3><p>Integrating the vAccel framework to a sandboxed container runtime removes the
need for complicated passthrough setups. No kernel prerequisites are needed
(apart from the <code>VSOCK</code> options which is by-default enabled in most sandboxed
container runtimes).</p><p><figure id=figure-figure-3-kata-vaccel-modes><div class="d-flex justify-content-center"><div class=w-100><img src=/images/orin/kata-vaccel-modes.png alt=vaccel loading=lazy data-zoomable></div></div><figcaption>Figure 3: kata-vAccel modes</figcaption></figure></p><p>Currently, there are two modes for kata-vAccel (Figure 3): (a) the first one,
<code>exec</code>/<code>external</code> mode, supporting both runtime variants of <code>kata-containers</code> (Go
and Rust), spawns the <code>vaccelrt-agent</code> as an external binary, listening to the
vsock socket available for the <code>kata-agent</code> component of the container runtime;
(b) the second mode, <code>integrated</code> is only supported for the rust runtime
variant of <code>kata-containers</code> and embeds the functionality of the <code>vaccelrt-agent</code>
into the runtime, allowing better control and sandboxing of the components
running on the host system.</p><p>An overview of the execution flow for a vAccel-enabled
sandboxed container running on <code>kata-containers</code> is shown in Figure 4.</p><p><figure id=figure-figure-4-execution-flow-for-a-vaccel-enabled-sandboxed-container><div class="d-flex justify-content-center"><div class=w-100><img src=/images/orin/vaccel-kata-rs.png alt=kata-vaccel loading=lazy data-zoomable></div></div><figcaption>Figure 4: Execution flow for a vAccel-enabled sandboxed container</figcaption></figure></p><h4 id=kata-containers-binary-installation>kata-containers binary installation</h4><p>The steps to install the stock <code>kata-containers</code> runtime are shown below:</p><p>Get the release tarball:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>wget https://github.com/kata-containers/kata-containers/releases/download/3.2.0-rc0/kata-static-3.2.0-rc0-arm64.tar.xz
</span></span></code></pre></div><p>Unpack it in a temporary directory:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>mkdir /tmp/kata-release
</span></span><span class=line><span class=cl>xzcat kata-static-3.2.0-rc0-arm64.tar.xz <span class=p>|</span> tar -xvf - -C /tmp/kata-release
</span></span></code></pre></div><p>You should be presented with the following directory structure:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># tree -d /tmp/kata-release/</span>
</span></span><span class=line><span class=cl>/tmp/kata-release/
</span></span><span class=line><span class=cl>└── opt
</span></span><span class=line><span class=cl>    └── kata
</span></span><span class=line><span class=cl>        ├── bin
</span></span><span class=line><span class=cl>        ├── libexec
</span></span><span class=line><span class=cl>        ├── runtime-rs
</span></span><span class=line><span class=cl>        │   └── bin
</span></span><span class=line><span class=cl>        └── share
</span></span><span class=line><span class=cl>            ├── bash-completion
</span></span><span class=line><span class=cl>            │   └── completions
</span></span><span class=line><span class=cl>            ├── defaults
</span></span><span class=line><span class=cl>            │   └── kata-containers
</span></span><span class=line><span class=cl>            ├── kata-containers
</span></span><span class=line><span class=cl>            └── kata-qemu
</span></span><span class=line><span class=cl>                └── qemu
</span></span><span class=line><span class=cl>                    └── firmware
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=m>15</span> directories
</span></span></code></pre></div><p>Move the files to <code>/opt/kata</code> (This is a hard requirement, as all config files assume this folder):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>rsync -oagxvPH /tmp/kata-release/opt/kata /opt/
</span></span><span class=line><span class=cl>rm -rf /tmp/kata-release
</span></span></code></pre></div><p>Create helper files for the kata VMMs you would like to try out:</p><p>Cloud-hypervisor:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-clh-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-clh.toml /opt/kata/bin/containerd-shim-kata-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>Dragonball:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-rs-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-dragonball.toml /opt/kata/runtime-rs/bin/containerd-shim-kata-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>AWS Firecracker:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-fc-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-fc.toml /opt/kata/bin/containerd-shim-kata-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>QEMU:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-qemu-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>For each of the VMMs you need an entry in the <code>/etc/containerd/config.toml</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>       <span class=o>[</span>plugins.<span class=s2>&#34;io.containerd.grpc.v1.cri&#34;</span>.containerd.runtimes.kata-fc<span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices_all_devices_allowed</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>runtime_type</span> <span class=o>=</span> <span class=s2>&#34;io.containerd.kata-fc.v2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nv>snapshotter</span> <span class=o>=</span> <span class=s2>&#34;devmapper&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nv>pod_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>container_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=o>[</span>plugins.<span class=s2>&#34;io.containerd.grpc.v1.cri&#34;</span>.containerd.runtimes.kata-rs<span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices_all_devices_allowed</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>runtime_type</span> <span class=o>=</span> <span class=s2>&#34;io.containerd.kata-rs.v2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=c1>#snapshotter = &#34;devmapper&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nv>pod_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>container_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=o>[</span>plugins.<span class=s2>&#34;io.containerd.grpc.v1.cri&#34;</span>.containerd.runtimes.kata-clh<span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices_all_devices_allowed</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>runtime_type</span> <span class=o>=</span> <span class=s2>&#34;io.containerd.kata-clh.v2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nv>pod_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>container_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=o>[</span>plugins.<span class=s2>&#34;io.containerd.grpc.v1.cri&#34;</span>.containerd.runtimes.kata-qemu<span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>privileged_without_host_devices_all_devices_allowed</span> <span class=o>=</span> <span class=nb>false</span>
</span></span><span class=line><span class=cl>          <span class=nv>runtime_type</span> <span class=o>=</span> <span class=s2>&#34;io.containerd.kata-qemu.v2&#34;</span>
</span></span><span class=line><span class=cl>          <span class=nv>pod_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>          <span class=nv>container_annotations</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;*&#34;</span><span class=o>]</span>
</span></span></code></pre></div><p><strong>Note</strong>: for AWS Firecracker, the only supported snapshotter is <code>devmapper</code>.
Make sure you <a href=/posts/kata-build-configure-fc/#devmapper-snapshotter>follow the
instructions</a> to setup
it correctly in <code>containerd</code>.</p><p>Restart <code>containerd</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>systemctl restart containerd
</span></span></code></pre></div><p>You should now be able to spawn a stock kata-container using one of the VMM configurations above:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ sudo nerdctl run --rm -it --runtime io.containerd.kata-fc.v2 --snapshotter devmapper ubuntu:latest uname -a 
</span></span><span class=line><span class=cl>Linux d13db14b0c9a 5.15.26 #2 SMP Fri Apr 21 05:05:44 BST 2023 aarch64 aarch64 aarch64 GNU/Linux
</span></span></code></pre></div><h4 id=enable-vaccel-on-the-kata-runtime>Enable vAccel on the kata runtime</h4><p>To enable vAccel, we need to add a custom kata runtime binary that instantiates
the <code>vaccel-agent</code> alongside the container spawn.</p><p>For now, we build binaries for <code>x86_64</code> and <code>aarch64</code>:</p><h5 id=go-runtime>Go runtime</h5><p>For the go runtime (<code>kata-fc</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccel-go-lib/aarch64/containerd-shim-kata-v2 -O /opt/kata/bin/containerd-shim-kata-vaccel-v2
</span></span><span class=line><span class=cl>chmod +x /opt/kata/bin/containerd-shim-kata-vaccel-v2
</span></span><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccel-go-lib/toml/configuration-fc-vaccel.toml -O /opt/kata/share/defaults/kata-containers/configuration-fc-vaccel.toml
</span></span></code></pre></div><p>The next step is to setup helper scripts like above.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-fc-vaccel-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-fc-vaccel.toml /opt/kata/bin/containerd-shim-kata-vaccel-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>and add the runtime to <code>/etc/containerd/config.toml</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>       [plugins.&#34;io.containerd.grpc.v1.cri&#34;.containerd.runtimes.kata-fc-vaccel]
</span></span><span class=line><span class=cl>          privileged_without_host_devices = true
</span></span><span class=line><span class=cl>          privileged_without_host_devices_all_devices_allowed = true
</span></span><span class=line><span class=cl>          runtime_type = &#34;io.containerd.kata-fc-vaccel.v2&#34;
</span></span><span class=line><span class=cl>          snapshotter = &#34;devmapper&#34;
</span></span><span class=line><span class=cl>          pod_annotations = [&#34;*&#34;]
</span></span><span class=line><span class=cl>          container_annotations = [&#34;*&#34;]
</span></span></code></pre></div><h5 id=rust-runtime>Rust runtime</h5><p>For the rust runtime (<code>kata-rs</code>)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccel-rs-lib/shim/main/aarch64/containerd-shim-kata-v2 -O /opt/kata/runtime-rs/bin/containerd-shim-kata-vaccel-v2
</span></span><span class=line><span class=cl>chmod +x /opt/kata/runtime-rs/bin/containerd-shim-kata-vaccel-v2
</span></span><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccel-rs-lib/toml/main/aarch64/configuration-dragonball.toml -O /opt/kata/share/defaults/kata-containers/configuration-dbs-vaccel.toml
</span></span></code></pre></div><p>The next step is to setup helper scripts like above.</p><p>Dragonball with vAccel:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-rs-vaccel-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-dbs-vaccel.toml /opt/kata/runtime-rs/bin/containerd-shim-kata-vaccel-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><p>and add the runtime to <code>/etc/containerd/config.toml</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>       [plugins.&#34;io.containerd.grpc.v1.cri&#34;.containerd.runtimes.kata-rs-vaccel]
</span></span><span class=line><span class=cl>          privileged_without_host_devices = false
</span></span><span class=line><span class=cl>          privileged_without_host_devices_all_devices_allowed = false
</span></span><span class=line><span class=cl>          runtime_type = &#34;io.containerd.kata-rs-vaccel.v2&#34;
</span></span><span class=line><span class=cl>          #snapshotter = &#34;devmapper&#34;
</span></span><span class=line><span class=cl>          pod_annotations = [&#34;*&#34;]
</span></span><span class=line><span class=cl>          container_annotations = [&#34;*&#34;]
</span></span></code></pre></div><p>We should now be able to spawn a vAccel-enabled kata container with both go and rust runtimes:</p><p>Go:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ nerdctl run --runtime io.containerd.kata-fc-vaccel.v2  --rm -it --snapshotter devmapper harbor.nbfc.io/nubificus/test-vaccel:latest /bin/bash
</span></span><span class=line><span class=cl>root@bce78aa7d1b4:/# 
</span></span></code></pre></div><p>Rust:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ nerdctl run --runtime io.containerd.kata-rs-vaccel.v2  --rm   -it harbor.nbfc.io/nubificus/test-vaccel:latest /bin/bash
</span></span><span class=line><span class=cl>root@2ce045d042bc:/#
</span></span></code></pre></div><h3 id=install-and-setup-vaccel-and-the-jetson-inference-plugin-on-the-host>Install and Setup vAccel and the <code>jetson-inference</code> plugin on the host</h3><h4 id=setup-vaccel>Setup vAccel</h4><p>To install vAccel on the Orin we need to download the core runtime library, the
agent and setup the jetson plugin. For a binary install, you can use the following snippet:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccelrt/main/aarch64/Release-deb/vaccel-0.5.0-Linux.deb
</span></span><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccelrt/agent/main/aarch64/Release-deb/vaccelrt-agent-0.3.6-Linux.deb
</span></span><span class=line><span class=cl>wget https://s3.nbfc.io/nbfc-assets/github/vaccelrt/plugins/jetson_inference/main/aarch64/Release-deb/vaccelrt-plugin-jetson-0.1.0-Linux.deb
</span></span><span class=line><span class=cl>dpkg -i vaccel-0.5.0-Linux.deb 
</span></span><span class=line><span class=cl>dpkg -i vaccelrt-agent-0.3.6-Linux.deb
</span></span><span class=line><span class=cl>dpkg -i vaccelrt-plugin-jetson-0.1.0-Linux.deb
</span></span></code></pre></div><p>To be able to use the vAccel <code>jetson-inference</code> plugin, we need to install the
<code>jetson-inference</code> framework on the host system.</p><h4 id=setup-jetson-inference-on-the-orin>Setup <code>jetson-inference</code> on the Orin</h4><p>We follow the installation instructions from
<a href=https://github.com/dusty-nv/jetson-inference target=_blank rel=noopener>dusty-nv/jetson-inference</a>.</p><p>TL;DR:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git clone https://github.com/dusty-nv/jetson-inference --depth <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> jetson-inference
</span></span><span class=line><span class=cl>git submodule update --init
</span></span><span class=line><span class=cl>mkdir build <span class=o>&amp;&amp;</span> <span class=nb>cd</span> build
</span></span><span class=line><span class=cl>cmake ../ -DBUILD_INTERACTIVE<span class=o>=</span>OFF
</span></span><span class=line><span class=cl>make <span class=o>&amp;&amp;</span> make install
</span></span></code></pre></div><p>Make sure you link the models to a directory in
<code>/usr/local/share/imagenet-models</code>, as this is the default path where the
vAccel jetson plugin looks for them:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>mkdir /usr/local/share/imagenet-models
</span></span><span class=line><span class=cl>ln -s <span class=nv>$PWD</span>/../data/networks /usr/local/share/imagenet-models/
</span></span></code></pre></div><p>For more info on a full <code>jetson-inference</code> vaccel example, have a look at the <a href=https://docs.vaccel.org/quickstart/#jetson-example target=_blank rel=noopener>vAccel docs</a>.</p><h4 id=configure-the-container-runtime-to-use-vaccel>Configure the container runtime to use vAccel</h4><p>Now that we have kata containers setup and vAccel installed, let&rsquo;s configure the runtime!</p><p>Make sure you specify the relevant vaccel backend/plugins in the kata
configuration file. As mentioned above, there are two modes of operation
supported in the kata runtime for the <code>vaccelrt-agent</code>:</p><p>(a) <em>external</em>: the kata runtime spawns the <code>vaccelrt-agent</code> binary, as an external
application. The setup for the host vAccel plugins is done in the kata
configuration file.</p><p>(b) <em>integrated</em>: the kata runtime includes the <code>vaccelrt-agent</code> functionality,
embedded in the runtime code. The setup for the host vAccel plugins is done in
the helper script, as an environment variable (<code>VACCEL_BACKENDS</code>).</p><p>To configure the system for mode (a), for the go runtime we edit
<code>/opt/kata/share/defaults/kata-containers/configuration-fc-vaccel.toml</code> and add
the <code>jetson</code> plugin before <code>noop</code> (default/debug) plugin:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@@ -54,7 +54,7 @@
</span></span><span class=line><span class=cl> # vaccel_guest_backend can be one of &#34;virtio&#34; or &#34;vsock&#34;
</span></span><span class=line><span class=cl> # Your distribution recommends: vaccel_host_backend = noop
</span></span><span class=line><span class=cl> # Your distribution recommends: vaccel_guest_backend = vsock
</span></span><span class=line><span class=cl>-vaccel_host_backends = &#34;noop&#34;
</span></span><span class=line><span class=cl>+vaccel_host_backends = &#34;jetson,noop&#34;
</span></span><span class=line><span class=cl> vaccel_guest_backend = &#34;vsock&#34;
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> # If vaccel_guest_backend=vsock specify the vAccel Agent vsock port
</span></span></code></pre></div><p>For the rust runtime, we edit the <code>/opt/kata/share/defaults/kata-containers/configuration-dbs-vaccel.toml</code> file as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>agent_path= &#34;/usr/local/bin/vaccelrt-agent&#34;
</span></span><span class=line><span class=cl>debug= &#34;1&#34;
</span></span><span class=line><span class=cl>backends= &#34;jetson,noop&#34;
</span></span><span class=line><span class=cl>backends_library= &#34;/usr/local/lib/&#34;
</span></span><span class=line><span class=cl>endpoint_port= &#34;2048&#34;
</span></span><span class=line><span class=cl>execution_type= &#34;exec&#34;
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>For mode (b), we do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>agent_path= &#34;&#34;
</span></span><span class=line><span class=cl>debug= &#34;1&#34;
</span></span><span class=line><span class=cl>backends= &#34;&#34;
</span></span><span class=line><span class=cl>backends_library= &#34;/usr/local/lib/&#34;
</span></span><span class=line><span class=cl>endpoint_port= &#34;2048&#34;
</span></span><span class=line><span class=cl>execution_type= &#34;integrated&#34;
</span></span></code></pre></div><p>and edit the helper script to specify the plugins:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>cat &gt; /usr/local/bin/containerd-shim-kata-rs-vaccel-v2 <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=s>VACCEL_BACKENDS=/usr/local/lib/libvaccel-jetson.so:/usr/local/lib/libvaccel-noop.so KATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-dbs-vaccel.toml /opt/kata/runtime-rs/bin/containerd-shim-kata-vaccel-v2 $@
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><h3 id=spawn-a-vaccel-enabled-sandboxed-container>Spawn a vAccel-enabled sandboxed container</h3><p>We are now ready to spawn a vAccel-enabled container. We already have a test container image,
but if you would like to build your own, the Dockerfile is the one below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>FROM ubuntu:latest
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>RUN apt update &amp;&amp; apt install -y wget &amp;&amp; \
</span></span><span class=line><span class=cl>	wget https://s3.nbfc.io/nbfc-assets/github/vaccelrt/master/aarch64/Release-deb/vaccel-0.5.0-Linux.deb &amp;&amp; \
</span></span><span class=line><span class=cl>	wget https://s3.nbfc.io/nbfc-assets/github/vaccelrt/plugins/vsock/master/aarch64/Release-deb/vaccelrt-plugin-vsock-0.1.0-Linux.deb &amp;&amp; \
</span></span><span class=line><span class=cl>	dpkg -i vaccel-0.5.0-Linux.deb vaccelrt-plugin-vsock-0.1.0-Linux.deb 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ENV VACCEL_DEBUG_LEVEL=4
</span></span><span class=line><span class=cl>ENV VACCEL_BACKENDS=/usr/local/lib/libvaccel-vsock.so
</span></span></code></pre></div><p>build like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker build -t vaccel-test-container:aarch64 -f Dockerfile .
</span></span></code></pre></div><p>Essentially, it installs the vAccel core library, and the <code>vsock</code> plugin that
communicates with the vAccel agent running on the host (spawned using the modes
described above).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ sudo nerdctl run --runtime io.containerd.kata-rs-vaccel.v2  --rm  -it nubificus/vaccel-test-container:latest /bin/bash
</span></span><span class=line><span class=cl>root@23a8738e14a8:/# 
</span></span></code></pre></div><p>Let&rsquo;s get an image:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>$</span> <span class=n>wget</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>upload</span><span class=o>.</span><span class=n>wikimedia</span><span class=o>.</span><span class=n>org</span><span class=o>/</span><span class=n>wikipedia</span><span class=o>/</span><span class=n>commons</span><span class=o>/</span><span class=n>b</span><span class=o>/</span><span class=n>bd</span><span class=o>/</span><span class=n>Golden_Retriever_Dukedestiny01_drvd</span><span class=o>.</span><span class=n>jpg</span>
</span></span><span class=line><span class=cl><span class=o>--</span><span class=mi>2023</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>17</span> <span class=mi>17</span><span class=p>:</span><span class=mi>48</span><span class=p>:</span><span class=mi>09</span><span class=o>--</span>  <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>upload</span><span class=o>.</span><span class=n>wikimedia</span><span class=o>.</span><span class=n>org</span><span class=o>/</span><span class=n>wikipedia</span><span class=o>/</span><span class=n>commons</span><span class=o>/</span><span class=n>b</span><span class=o>/</span><span class=n>bd</span><span class=o>/</span><span class=n>Golden_Retriever_Dukedestiny01_drvd</span><span class=o>.</span><span class=n>jpg</span>
</span></span><span class=line><span class=cl><span class=n>Resolving</span> <span class=n>upload</span><span class=o>.</span><span class=n>wikimedia</span><span class=o>.</span><span class=n>org</span> <span class=p>(</span><span class=n>upload</span><span class=o>.</span><span class=n>wikimedia</span><span class=o>.</span><span class=n>org</span><span class=p>)</span><span class=o>...</span> <span class=mf>185.15</span><span class=o>.</span><span class=mf>59.240</span><span class=p>,</span> <span class=mi>2</span><span class=n>a02</span><span class=p>:</span><span class=n>ec80</span><span class=p>:</span><span class=mi>300</span><span class=p>:</span><span class=n>ed1a</span><span class=p>::</span><span class=mi>2</span><span class=p>:</span><span class=n>b</span>
</span></span><span class=line><span class=cl><span class=n>Connecting</span> <span class=n>to</span> <span class=n>upload</span><span class=o>.</span><span class=n>wikimedia</span><span class=o>.</span><span class=n>org</span> <span class=p>(</span><span class=n>upload</span><span class=o>.</span><span class=n>wikimedia</span><span class=o>.</span><span class=n>org</span><span class=p>)</span><span class=o>|</span><span class=mf>185.15</span><span class=o>.</span><span class=mf>59.240</span><span class=o>|</span><span class=p>:</span><span class=mf>443.</span><span class=o>..</span> <span class=n>connected</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=n>HTTP</span> <span class=n>request</span> <span class=n>sent</span><span class=p>,</span> <span class=n>awaiting</span> <span class=n>response</span><span class=o>...</span> <span class=mi>200</span> <span class=n>OK</span>
</span></span><span class=line><span class=cl><span class=n>Length</span><span class=p>:</span> <span class=mi>165000</span> <span class=p>(</span><span class=mi>161</span><span class=n>K</span><span class=p>)</span> <span class=p>[</span><span class=n>image</span><span class=o>/</span><span class=n>jpeg</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Saving</span> <span class=n>to</span><span class=p>:</span> <span class=s1>&#39;Golden_Retriever_Dukedestiny01_drvd.jpg&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Golden_Retriever_Dukedestiny01_drvd</span><span class=o>.</span><span class=n>jpg</span>        <span class=mi>100</span><span class=o>%</span><span class=p>[</span><span class=o>==================================================================================================&gt;</span><span class=p>]</span> <span class=mf>161.13</span><span class=n>K</span>   <span class=mi>701</span><span class=n>KB</span><span class=o>/</span><span class=n>s</span>    <span class=ow>in</span> <span class=mf>0.2</span><span class=n>s</span>    
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>2023</span><span class=o>-</span><span class=mi>09</span><span class=o>-</span><span class=mi>17</span> <span class=mi>17</span><span class=p>:</span><span class=mi>48</span><span class=p>:</span><span class=mi>14</span> <span class=p>(</span><span class=mi>701</span> <span class=n>KB</span><span class=o>/</span><span class=n>s</span><span class=p>)</span> <span class=o>-</span> <span class=s1>&#39;Golden_Retriever_Dukedestiny01_drvd.jpg&#39;</span> <span class=n>saved</span> <span class=p>[</span><span class=mi>165000</span><span class=o>/</span><span class=mi>165000</span><span class=p>]</span>
</span></span></code></pre></div><p>and try to issue a classify operation using vAccel&rsquo;s <code>jetson-inference</code> backend:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>root@2ce045d042bc:/# /usr/local/bin/classify Golden_Retriever_Dukedestiny01_drvd.jpg <span class=m>1</span>
</span></span><span class=line><span class=cl>Initialized session with id: <span class=m>1</span>
</span></span><span class=line><span class=cl>Image size: 165000B
</span></span><span class=line><span class=cl>classification tags: 86.768% golden retriever
</span></span></code></pre></div><p>Awesome, right?! We are able to use hardware acceleration on a sandboxed
container that does not have direct access to the accelerator device. Stay
tuned for more info on our progress with <code>kata-containers</code> and vAccel!</p></div><div class=article-tags><a class="badge badge-light" href=/tag/nvidia/>NVIDIA</a>
<a class="badge badge-light" href=/tag/jetson-agx-orin/>Jetson AGX Orin</a>
<a class="badge badge-light" href=/tag/vaccel/>VAccel</a>
<a class="badge badge-light" href=/tag/kata-containers/>Kata Containers</a>
<a class="badge badge-light" href=/tag/runtimes/>Runtimes</a></div><div class=share-box><ul class=share><li><a href="https://twitter.com/intent/tweet?url=%2Fblog%2Forin-vm-vaccel%2F&amp;text=Isolated%2C+hardware-accelerated+functions+on+Jetson+AGX+Orin" target=_blank rel=noopener class=share-btn-twitter aria-label=twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=%2Fblog%2Forin-vm-vaccel%2F&amp;t=Isolated%2C+hardware-accelerated+functions+on+Jetson+AGX+Orin" target=_blank rel=noopener class=share-btn-facebook aria-label=facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=Isolated%2C%20hardware-accelerated%20functions%20on%20Jetson%20AGX%20Orin&amp;body=%2Fblog%2Forin-vm-vaccel%2F" target=_blank rel=noopener class=share-btn-email aria-label=envelope><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=%2Fblog%2Forin-vm-vaccel%2F&amp;title=Isolated%2C+hardware-accelerated+functions+on+Jetson+AGX+Orin" target=_blank rel=noopener class=share-btn-linkedin aria-label=linkedin-in><i class="fab fa-linkedin-in"></i></a></li><li><a href="whatsapp://send?text=Isolated%2C+hardware-accelerated+functions+on+Jetson+AGX+Orin%20%2Fblog%2Forin-vm-vaccel%2F" target=_blank rel=noopener class=share-btn-whatsapp aria-label=whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=%2Fblog%2Forin-vm-vaccel%2F&amp;title=Isolated%2C+hardware-accelerated+functions+on+Jetson+AGX+Orin" target=_blank rel=noopener class=share-btn-weibo aria-label=weibo><i class="fab fa-weibo"></i></a></li></ul></div></div></article><script>function blogGoBack(){document.referrer&&document.referrer.indexOf("/blog")!==-1?history.back():window.location.href="/blog/"}</script></div><div class=page-footer><div class=container><footer class=site-footer><p class="powered-by copyright-license-text">© 2026 Nubificus LTD. This work is licensed under <a href=https://creativecommons.org/licenses/by-nc-nd/4.0 rel="noopener noreferrer" target=_blank>CC BY NC ND 4.0</a></p><p class="powered-by footer-license-icons"><a href=https://creativecommons.org/licenses/by-nc-nd/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-nc fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-nd fa-2x" aria-hidden=true></i></a></p><p class=powered-by>Published with <a href="https://hugoblox.com/?utm_campaign=poweredby" target=_blank rel=noopener>Hugo Blox Builder</a> — the free, <a href=https://github.com/HugoBlox/hugo-blox-builder target=_blank rel=noopener>open source</a> website builder that empowers creators.</p></footer></div></div><script src=/js/vendor-bundle.min.6782e3f6a4f06ea4766df038c45ecf40.js></script><script src=https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js integrity crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":true}</script><script src=/js/wowchemy-headroom.b95a7e109243f29d04930ae8cb49a756.js type=module></script><script src=/en/js/wowchemy.min.ed487406ecbb80985462ba7a97b6f2d2.js></script><script src=/js/wowchemy-map.a26e9d2f7238ba5b868384f1c5bc6477.js type=module></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy
</a><a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=/js/wowchemy-publication.9c0e895144aef5a693008b5c5d450147.js type=module></script></body></html>